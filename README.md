# Boardshop

Простой статический MVP магазина горнолыжного и сноубордического снаряжения (RU/KG) без онлайн-оплаты. Включает каталог с фильтрами, корзину с промокодами, оформление заказа, историю заказов в браузере и простую "админку" для добавления товаров.

## Возможности
- Двухъязычный интерфейс (русский/кыргызский) с переключателем.
- Каталог с фильтрами по категории, бренду, размеру и цене; ростовки/размеры отображаются по товарам, где применимо.
- Карточки с ценами в KGS, добавление в корзину, промокоды со скидкой в процентах.
- Оформление без онлайн-оплаты: сбор контактов/адреса, выбор СДЭК или самовывоз; подсказка, что стоимость доставки уточняется по email.
- История заказов и корзина сохраняются локально (localStorage).
- Политика возврата на двух языках, контакты с адресом самовывоза, email, Telegram и картой.
- Лёгкая админка: добавление товаров в браузере + шаблон `import_template.csv` для подготовки данных из Google Sheets.

## Как запустить локально
```bash
# 1) открыть в браузере напрямую
python -m http.server 8000
open http://localhost:8000

# 2) или собрать статический nginx-образ
docker build -t boardshop .
docker run --rm -p 8080:80 boardshop
```

## Структура
- `index.html` — структура страниц, разделы каталога/корзины/админки/контактов.
- `styles.css` — тёмная тема, сетки карточек, формы и навигация.
- `app.js` — переводы RU/KG, моковые товары, фильтры, корзина, промокоды, сохранение в localStorage, форма заказа и админка.
- `import_template.csv` — пример строки для импорта из Google Sheets/CSV (разделитель размеров `|`).
- `IMPLEMENTATION_PLAN.md` — план реализации и требования из предыдущего шага.

## Импорт из Google Sheets
1. В Google Sheets подготовьте столбцы: `name_ru`, `name_ky`, `description_ru`, `description_ky`, `category`, `brand`, `price`, `sizes`, `image`.
2. Экспортируйте как CSV, замените разделитель размеров на `,` или `|` и откройте файл, чтобы скопировать данные в админку вручную (в текущей версии нет API).
3. При необходимости расширьте `app.js`, чтобы парсить загруженный CSV и сохранять в `localStorage` или отправлять на свой backend.

## Ограничения MVP
- Нет реальной авторизации и ролей; данные админки хранятся в браузере текущего пользователя.
- Нет интеграции с платёжными и логистическими сервисами; доставка подтверждается вручную.
- Для продакшена рекомендуется подключить API/Headless CMS и базу данных, вынести корзину/заказы на сервер и добавить аутентификацию.

## Как добавить Strapi (Headless CMS) и PostgreSQL локально
Ниже — минимальный сценарий, чтобы развернуть Strapi и Postgres рядом со статическим фронтом через Docker Compose.

1. **Установите Docker + Docker Compose.** Убедитесь, что порты `1337`, `5432` и `8080` свободны.
2. **Запустите контейнеры.** В корне репозитория выполните:
   ```bash
   docker compose up --build
   ```
   Это поднимет три сервиса:
   - `db` — PostgreSQL 15 (`postgres:15-alpine`) с данными в томе `db-data`.
   - `strapi` — Headless CMS (`strapi/strapi:latest`), код и данные сохраняются в `./strapi-app`.
   - `frontend` — статичный образ из текущего `Dockerfile`, доступен на `http://localhost:8080`.
3. **Замените секреты Strapi.** В `docker-compose.yml` поменяйте значения `APP_KEYS`, `API_TOKEN_SALT`, `ADMIN_JWT_SECRET`, `JWT_SECRET` на свои (можно сгенерировать `openssl rand -hex 32`).
4. **Инициализируйте Strapi.** Перейдите на `http://localhost:1337/admin` и создайте учётку администратора.
5. **Опишите модели.** Создайте коллекции, например:
   - `products` (имя/описание RU/KG, категория, бренд, цена, размеры, картинки);
   - `promocodes` (код, скидка в %, дата истечения, активен/нет);
   - `orders` (позиции корзины, контакты, статус, комментарии).
6. **Настройте права и CORS.** Откройте чтение каталога публично (или через токен), а записи/обновления заказов ограничьте токенами/ролями. Разрешите домен фронтенда в CORS Strapi.
7. **Импортируйте данные.** Можно загрузить CSV из `import_template.csv` через Strapi Collection Types или написать краткий seed в `strapi-app`.
8. **Подключите фронтенд.** В `app.js` замените мок-данные и работу с `localStorage` на запросы к REST/GraphQL Strapi (базовый URL `http://localhost:1337/api`).
9. **Сохраните данные между перезапусками.** Директория `./strapi-app` и том `db-data` сохраняют состояние Strapi и базы; не коммитьте реальные секреты/дампы в git.
